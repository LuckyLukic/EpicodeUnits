{"ast":null,"code":"import _asyncToGenerator from \"/Users/lucaiannice/Desktop/EpicodeUnits/Angular/modulo-3/Settimana-3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/get-movies.service\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\n\nfunction FavoritesComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\n\nconst _c0 = function (a1) {\n  return [\"/movies\", a1];\n};\n\nfunction FavoritesComponent_ng_template_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"div\", 8)(3, \"h5\", 9);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 10)(6, \"p\", 11);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\", 11);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"a\", 12);\n    i0.ɵɵtext(11, \"DETAIL\");\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const singleMovie_r6 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"Title:\", singleMovie_r6.movieId, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Id: \", singleMovie_r6.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Popularity: \", singleMovie_r6.userId, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, singleMovie_r6.id));\n  }\n}\n\nfunction FavoritesComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4);\n    i0.ɵɵtemplate(2, FavoritesComponent_ng_template_1_div_2_Template, 12, 6, \"div\", 5);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.favoriteMovies);\n  }\n}\n\nfunction FavoritesComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \" Sorry, something is wrong. Please try later! \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class FavoritesComponent {\n  constructor(movies, authSrv) {\n    this.movies = movies;\n    this.authSrv = authSrv;\n    this.poster = environment.posterUrl;\n  }\n\n  ngOnInit() {\n    this.authSrv.user$.subscribe(_utente => {\n      if (_utente) {\n        this.utente = _utente.user;\n        this.favoriti(this.utente.id); // console.log(this.favoriteMovies)\n        // for (let movie of this.favoriteMovies) {\n        //   this.movies.getMovieDetail(movie.movieId).subscribe((data:Movie) => {\n        //     this.preferedMovieList.push(data)\n        //   }\n        //   )\n        // }\n      }\n    });\n  }\n\n  favoriti(id) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.movies.getFavourites(id).subscribe(data => {\n        _this.favoriteMovies = data;\n\n        for (let movie of _this.favoriteMovies) {\n          _this.movies.getMovieDetail(movie.movieId).subscribe(data => {\n            _this.preferedMovieList.push(data);\n          });\n        }\n      });\n    })();\n  }\n\n}\n\nFavoritesComponent.ɵfac = function FavoritesComponent_Factory(t) {\n  return new (t || FavoritesComponent)(i0.ɵɵdirectiveInject(i1.GetMoviesService), i0.ɵɵdirectiveInject(i2.AuthService));\n};\n\nFavoritesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FavoritesComponent,\n  selectors: [[\"app-favorites\"]],\n  decls: 5,\n  vars: 3,\n  consts: [[4, \"ngIf\", \"ngIfThen\", \"ngIfElse\"], [\"showmovies\", \"\"], [\"sorry\", \"\"], [1, \"container-fluid\"], [1, \"row\", \"row-gap-3\"], [\"class\", \"cardwrapper col-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"cardwrapper\", \"col-3\"], [1, \"card\", \"h-100\"], [1, \"card-body\", \"d-flex\", \"flex-column\", \"justify-content-between\"], [1, \"card-title\"], [1, \"d-flex\", \"flex-column\"], [1, \"card-text\", \"mb-2\"], [1, \"btn\", \"btn-primary\", \"mb-2\", 3, \"routerLink\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"col-4\"]],\n  template: function FavoritesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, FavoritesComponent_ng_container_0_Template, 1, 0, \"ng-container\", 0);\n      i0.ɵɵtemplate(1, FavoritesComponent_ng_template_1_Template, 3, 1, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(3, FavoritesComponent_ng_template_3_Template, 2, 0, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(2);\n\n      const _r3 = i0.ɵɵreference(4);\n\n      i0.ɵɵproperty(\"ngIf\", ctx.favoriteMovies)(\"ngIfThen\", _r1)(\"ngIfElse\", _r3);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.RouterLinkWithHref],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJmYXZvcml0ZXMuY29tcG9uZW50LnNjc3MifQ== */\"]\n});","map":{"version":3,"mappings":";AAMA,SAASA,WAAT,QAA4B,8BAA5B;;;;;;;;;ICNAC;;;;;;;;;;IAKMA,+BAA0E,CAA1E,EAA0E,KAA1E,EAA0E,CAA1E,EAA0E,CAA1E,EAA0E,KAA1E,EAA0E,CAA1E,EAA0E,CAA1E,EAA0E,IAA1E,EAA0E,CAA1E;IAQ6BA;IAA+BA;IACtDA,gCAAgC,CAAhC,EAAgC,GAAhC,EAAgC,EAAhC;IAC4BA;IAAwBA;IAClDA;IAA0BA;IAAoCA;IAG9DA;IAGGA;IAAMA;;;;;IATYA;IAAAA;IAEKA;IAAAA;IACAA;IAAAA;IAIxBA;IAAAA;;;;;;IAjBdA,+BAA6B,CAA7B,EAA6B,KAA7B,EAA6B,CAA7B;IAEIA;IAwBFA;;;;;IAxByDA;IAAAA;;;;;;IA6B3DA;IACEA;IACFA;;;;ADtBF,OAAM,MAAOC,kBAAP,CAAyB;EAY7BC,YAAoBC,MAApB,EAAsDC,OAAtD,EAA0E;IAAtD;IAAkC;IALtD,cAASL,WAAW,CAACM,SAArB;EAK+E;;EAE/EC,QAAQ;IAGN,KAAKF,OAAL,CAAaG,KAAb,CAAmBC,SAAnB,CAA8BC,OAAD,IAAY;MACvC,IAAIA,OAAJ,EAAa;QACX,KAAKC,MAAL,GAAcD,OAAO,CAACE,IAAtB;QAEA,KAAKC,QAAL,CAAc,KAAKF,MAAL,CAAYG,EAA1B,EAHW,CAIX;QACA;QACA;QACA;QACA;QACA;QACA;MAED;IACF,CAdD;EAiBH;;EAEKD,QAAQ,CAACC,EAAD,EAAU;IAAA;;IAAA;MACtB,KAAI,CAACV,MAAL,CAAYW,aAAZ,CAA0BD,EAA1B,EAA8BL,SAA9B,CAAyCO,IAAD,IAAsB;QAC5D,KAAI,CAACC,cAAL,GAAsBD,IAAtB;;QACA,KAAK,IAAIE,KAAT,IAAkB,KAAI,CAACD,cAAvB,EAAuC;UACnC,KAAI,CAACb,MAAL,CAAYe,cAAZ,CAA2BD,KAAK,CAACE,OAAjC,EAA0CX,SAA1C,CAAqDO,IAAD,IAAe;YACjE,KAAI,CAACK,iBAAL,CAAuBC,IAAvB,CAA4BN,IAA5B;UAEP,CAHK;QAIP;MACA,CARC;IADsB;EAUvB;;AA9C8B;;;mBAAlBd,oBAAkBD;AAAA;;;QAAlBC;EAAkBqB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCd/B1B;MAEAA;MA+BAA;;;;;;;;MAjCeA,0CAAsB,UAAtB,EAAsB2B,GAAtB,EAAsB,UAAtB,EAAsBC,GAAtB","names":["environment","i0","FavoritesComponent","constructor","movies","authSrv","posterUrl","ngOnInit","user$","subscribe","_utente","utente","user","favoriti","id","getFavourites","data","favoriteMovies","movie","getMovieDetail","movieId","preferedMovieList","push","selectors","decls","vars","consts","template","_r1","_r3"],"sourceRoot":"","sources":["/Users/lucaiannice/Desktop/EpicodeUnits/Angular/modulo-3/Settimana-3/src/app/components/favorites/favorites.component.ts","/Users/lucaiannice/Desktop/EpicodeUnits/Angular/modulo-3/Settimana-3/src/app/components/favorites/favorites.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Favourite } from 'src/app/module/favorite.interface';\nimport { GetMoviesService } from 'src/app/services/get-movies.service';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { Utente } from 'src/app/module/utente.interface';\nimport { Movie } from 'src/app/module/movie.interface';\nimport { environment } from 'src/environments/environment';\n\n\n@Component({\n  selector: 'app-favorites',\n  templateUrl: './favorites.component.html',\n  styleUrls: ['./favorites.component.scss']\n})\nexport class FavoritesComponent implements OnInit {\n\n\n\n  utente!: Partial<Utente>;\n  favoriteMovies!: Favourite[]\n  movieList!: Movie[]\n  poster = environment.posterUrl\n  preferedMovieList! : Movie[]\n\n\n\n  constructor(private movies: GetMoviesService, private authSrv: AuthService) { }\n\n  ngOnInit(): void {\n\n\n    this.authSrv.user$.subscribe((_utente) => {\n      if (_utente) {\n        this.utente = _utente.user;\n\n        this.favoriti(this.utente.id!)\n        // console.log(this.favoriteMovies)\n        // for (let movie of this.favoriteMovies) {\n        //   this.movies.getMovieDetail(movie.movieId).subscribe((data:Movie) => {\n        //     this.preferedMovieList.push(data)\n        //   }\n        //   )\n        // }\n\n      }\n    });\n\n\n}\n\nasync favoriti(id:number):Promise<void> {\n  this.movies.getFavourites(id).subscribe((data: Favourite[]) => {\n    this.favoriteMovies = data;\n    for (let movie of this.favoriteMovies) {\n        this.movies.getMovieDetail(movie.movieId).subscribe((data:Movie) => {\n          this.preferedMovieList.push(data)\n    \n  })\n}\n})\n}\n\n\n\n}\n\n","<ng-container *ngIf=\"favoriteMovies; then showmovies; else sorry\"></ng-container>\n\n<ng-template #showmovies>\n  <div class=\"container-fluid\">\n    <div class=\"row row-gap-3\">\n      <div class=\"cardwrapper col-3\" *ngFor=\"let singleMovie of favoriteMovies\">\n        <div class=\"card h-100\">\n          <!-- <img\n            src=\"{{ poster }}{{ singleMovie.poster_path }}\"\n            class=\"card-img-top\"\n            alt=\"movie poster\"\n          /> -->\n          <div class=\"card-body d-flex flex-column justify-content-between\">\n            <h5 class=\"card-title\">Title:{{ singleMovie.movieId }}</h5>\n            <div class=\"d-flex flex-column\">\n              <p class=\"card-text mb-2\">Id: {{ singleMovie.id }}</p>\n              <p class=\"card-text mb-2\">Popularity: {{ singleMovie.userId }}</p>\n\n\n              <a\n                [routerLink]=\"['/movies', singleMovie.id]\"\n                class=\"btn btn-primary mb-2\"\n                >DETAIL</a\n              >\n\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #sorry>\n  <div class=\"row d-flex justify-content-center align-items-center col-4\">\n    Sorry, something is wrong. Please try later!\n  </div>\n</ng-template>\n"]},"metadata":{},"sourceType":"module"}